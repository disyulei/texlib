% ===============================================
%          beamer slides setting
%
%   Author      : Bei Yu
%   Last Update : 10/2021
% ===============================================
\usepackage[utf8]{inputenc}
\usepackage{verbatim}

\usepackage[style=authoryear,backend=biber]{biblatex}
% Author names in publication list are consistent 
% i.e. name1 surname1, name2 surname2
% See https://tex.stackexchange.com/questions/106914/biblatex-does-not-reverse-the-first-and-last-names-of-the-second-author
\DeclareNameAlias{author}{first-last}

%%% Suppress biblatex annoying warning
\usepackage{silence}
\WarningFilter{biblatex}{Patching footnotes failed}

%%% Some useful commands
\newcommand{\pdfnewline}{\texorpdfstring{\newline}{ }} % pdf-friendly newline in links
\newcommand{\framefill}{\vskip0pt plus 1filll}         % Fill the vertical space in a slide (to put text at the bottom)
\newcommand{\xmark}{\ding{56}}                         % define xmark

% ==== packages
\usepackage{pifont}
\usepackage{pgfplotstable}
\usepackage{bm}
\usepackage{algpseudocode}           % for algorithm
\usepackage{algorithm}
\usepackage{pgfpages}                % allow note printing
\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{amsmath}
\usepackage{bbm}
% \usepackage{newtxtext}               % to use Times font (only for text, but not for math)
\usepackage{multirow}
\usepackage{subfig}
\usepackage{filecontents}
\usepackage{pgfplots}
\usepackage{graphicx}
\usepackage{threeparttable}
\usepackage{colortbl}
\usepackage{caption}
\usepackage{tikz}
\usepackage{tikzscale}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{patterns}
\usetikzlibrary{positioning,calc,fit,decorations.pathmorphing}
\usetikzlibrary{arrows,arrows.meta,decorations.markings}
\usetikzlibrary{backgrounds}
\usetikzlibrary{shapes.geometric,shapes.gates.logic.US,shapes,shapes.arrows}
%\captionsetup[figure]{font=scriptsize,textfont={color=CUHKgreen},labelformat=empty}
\captionsetup[figure]{font=footnotesize,labelformat=empty}
\usepackage[english]{babel}
\usepackage{wasysym}                 % smiling face
\usepackage{animate}                 % animation 
\usepackage{etoolbox}                % commands \newtoggle, \toggletrue, \iftoggle
\usepackage{courier}                 % courier font, used in \texttt
\usepackage{eso-pic}                 % for top-right logo
\usepackage{soul}
\usepackage{booktabs}                % toprule bottomrule
\usepackage{outlines}
\usepackage{pdfpages}
\usepackage{blkarray}
\usepackage{cleveref}
\usepackage{listings}                % typeset source code listings
\lstset{basicstyle=\ttfamily,breaklines=true}
\lstdefinestyle{scriptsize}
{
    language   = C,
    emptylines = 1,
    breaklines = true,
    basicstyle = \ttfamily\scriptsize,
    moredelim  = **[is][\color{red}]{@}{@},
}
\lstdefinestyle{small}
{
    language   = C,
    emptylines = 1,
    breaklines = true,
    basicstyle = \ttfamily\small,
    moredelim  = **[is][\color{red}]{@}{@},
}
\usepackage{hyperref}
\hypersetup{
    colorlinks = true,
    urlcolor   = CUHKgreen,
    citecolor  = cyan,
    linkcolor  = CUHKgreen,
}
\usepackage[cache=false]{minted}         % listings
\usemintedstyle{rainbow_dash}
\setminted{breaklines, linenos}
% \usepackage{ulem}                  % NOT compatible with clveref

% === only used for Chinese slides
\iffalse
\usepackage[UTF8]{ctex}
\usefonttheme{professionalfonts}     % 数学公式字体
%\usefonttheme{serif}                % 使用衬线字体
\usefonttheme{structureitalicserif}              
\fi
% === only used for English slides
%\usefonttheme[onlymath]{serif}       % 

% =============================================
%         Specify some local functions
% =============================================
\renewcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\calO}{\mathcal{O}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\calNP}{\mathcal{NP}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newtheorem{mytheorem}{\textbf{Theorem}}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}

\newcommand{\todo}[1]{\textcolor{red}{[TODO: #1}]}
\newcommand{\revise}[1]{\textcolor{blue}{#1}}
\newcommand{\mycite}[1]{\textcolor{CUHKyellow}{[#1]}}

\makeatletter
\let\@@magyar@captionfix\relax
\makeatother

% 08/2021: colored underline, added by Leon
% colored underline, with Beamer overlay support
% usage: \cul{x} or \cul[blue]{x} or \cul<2->{x} or \cul<2->[blue]{x}
\newcommand<>{\cul}[2][red]{%
  % change underline dimentions: https://tex.stackexchange.com/a/167957/25264
  \fontdimen8\textfont3=0.75pt%
  % colored underline: https://tex.stackexchange.com/a/9477/25264
  % transparent underline: https://tex.stackexchange.com/a/45601/25264
  % switch between colored and transparent: http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/beamer/doc/beameruserguide.pdf sections 9.3 and 9.6.1
  \alt#3%
      {\color{#1}\underline{{\color{black}#2}}\color{black}}%
      {\transparent{0.0}\underline{{\transparent{1.0}#2}}\transparent{1.0}}%
}


